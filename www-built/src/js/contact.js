require(["common"],function(e){require(["form"])}),define("contact",function(){}),define("form",["jquery"],function(e,s){(function(){function s(){var s=e(this);s.val().length?s.closest(".form__wrapper").addClass(u).removeClass(v):s.closest(".form__wrapper").removeClass(u+" "+v)}function a(){p.val("")}function r(e){if(/(\r\n|\n|\r)/.test(C.val())){C.height();C.addClass("textarea_is_foused"),C.css("min-height","0px");var s=C.prop("scrollHeight"),a=C.css("min-height").replace("px","");C.css("min-height",Math.max(s,a)+"px"),g.css("margin-top",Math.max(s,a))}}function n(){""==C.val()&&(C.removeClass("textarea_is_foused"),C.css("min-height",0),g.css("margin-top",0))}function t(s){g.addClass("form__envoyer--submitting"),e.ajax({type:h.attr("method"),url:h.attr("action"),data:h.serializeArray(),dataType:"json"}).done(function(e){i(e)}),s.preventDefault()}function i(e){b.find("h1").removeClass("error").removeClass("success"),g.removeClass("form__envoyer--error").removeClass("form__envoyer--success"),g.closest("span").addClass("hidden");var s;d(p),console.log(e.errors);for(s in e.errors){var a=h.find("[name="+s+"]").parent();l(a)}h.find("[name=societe]").parent().addClass("is-valid"),h.find("[name=web]").parent().addClass("is-valid"),1==e.success?d(_):!1,b.find("h1").addClass(""+e.status).html(e.validate),b.find("h2").text(e.validationSubText),b.find("h2").append('<span class="resultSubmail red" >'+e.resultMessagesubmail+"</span>"),g.removeClass("form__envoyer--submitting").addClass("form__envoyer--"+e.status),g.parent().find(".form__icon--"+e.status).removeClass("hidden"),e.errors&&setTimeout(o,3e3,e)}function o(e){g.parent().find(".form__icon--error").addClass("hidden"),g.removeClass("form__envoyer--error"),b.find("h1").removeClass("error").html(e.base_title),b.find("h2").html(e.base_text)}function l(e){e.removeClass("is-valid").addClass("has-error").children("span").fadeIn()}function d(e){e.removeClass("has-error").addClass("is-valid").children("span").fadeOut()}function f(){var s=e(this),a=e(this).parent();if(s.is(":required")){if(""==s.val(),a.removeClass("is-valid").removeClass("has-error"),s.closest("span").html("").fadeIn(),""!=s.val()&&s.val().length>=3)switch(s.attr("name")){case"name":s.val().match(m)?d(a):l(a);break;case"email":s.val().match(c)?d(a):l(a);break;default:d(a)}""!=s.val()&&s.val().length>0&&s.val().length<=3?l(a):!1}else""==s.val()?a.removeClass("is-valid"):a.addClass("is-valid")}var m=/^[a-zA-Z ]+$/,c=/(([a-zA-Z0-9\-?\.?]+)@(([a-zA-Z0-9\-_]+\.)+)([a-z]{2,3}))+$/,v="is_focused",u="is_populated",h=e("form"),_=h.find(".form__wrapper"),p=h.find('input[type="text"], textarea'),C=(h.find("#rf_name"),h.find("#rf_societe"),h.find("#rf_email"),h.find("#rf_web"),h.find("#rf_message")),g=h.find("#rf_envoyer"),b=h.find(".form__result");h.find(".form__errorMessage");h.on("submit",t.bind(this)),p.on("keyup",f),C.on("keyup",r.bind(this)),C.on("focusout",n),p.on("blur.flowupLabelsEvt",s),p.on("focus.flowupLabelsEvt",function(){e(this).closest(".form__wrapper").addClass(v)}),a()})()});